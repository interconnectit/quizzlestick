(function(c){var b={quiz:function(b){return this.each(function(){var d=c(this),a=b||d.data("quizzlestick"),f,g,k,p,h,q,l,r,n,s,a=c.extend(!0,{},c.fn.quizzlestick.defaults,a);d.data({quizzlestick:a,initialised:!0});a.id&&a.api.send({id:a.id,action:"config"},a);d.addClass("quizzlestick quizzlestick-"+a.type+" "+a.classname).on("start",a.onstart).on("complete",a.oncomplete).on("answer",a.onanswer).on("correct",a.oncorrect).on("incorrect",a.onincorrect).on("timer",a.ontimer).on("next",a.onnext).on("prev",
a.onprev).on("tap click",".quizzlestick-start",function(c){c.preventDefault();!d.data("started")&&!d.data("complete")&&(d.data("started",!0),s=setInterval(function(){a.state.time+=1E3;p.html(d.fumanchu("{{templates.timer}}",a));d.trigger("timer",[a.state.time,a]);a.state.time>=a.timelimit&&(a.mustanswer=!1,d.find(".quizzlestick-finish").click())},1E3),q.addClass("quizzlestick-hidden").hide(),f.show().removeClass("quizzlestick-hidden"),d.trigger("start",[s,a]))}).on("tap click",".quizzlestick-check",
function(b){b.preventDefault();if(!d.data("complete")){b=d.find(".quizzlestick-current");var e=b.find(".quizzlestick-answer"),f=b.find(".quizzlestick-result"),h=b.find(".quizzlestick-selected"),m=g.index(b),j=a.questions[m];b.data("answered")||(l.addClass("quizzlestick-hidden").hide(),b.addClass("quizzlestick-answered").data("answered",!0),a.state.question=m,j.total++,a.state.answers[m]||(a.state.answers[m]=[]),h.each(function(){var b=c(this),g=e.index(b),h=j.answers[g];a.state.answers[m].push(g);
h.total++;b.find(".quizzlestick-answer-total").html(h.total);h.correct?(a.state.points+=parseInt(h.points,10),"which"!==a.type&&(b.addClass("quizzlestick-correct"),h.resultcorrect&&f.append(d.fumanchu(h.resultcorrect,h)))):"poll"!==a.type&&(b.addClass("quizzlestick-incorrect"),h.resultincorrect&&f.append(d.fumanchu(h.resultincorrect,h)))}),h=a.state.answers[m].sort().join("")==j.correct.sort().join(""),e.each(function(d){0<=c.inArray(d,j.correct)&&("which"!==a.type&&"poll"!==a.type)&&c(this).addClass("quizzlestick-correct")}),
"single"===a.type||"multi"===a.type?h?(b.addClass("quizzlestick-question-correct"),j.resultcorrect?f.append(d.fumanchu(j.resultcorrect,j,a)):j.result&&f.append(d.fumanchu(j.result,j,a)),f.prepend(d.fumanchu(a.templates.correct,j,a)),d.trigger("correct",[h,b,j,a])):(b.addClass("quizzlestick-question-incorrect"),j.resultcorrect?f.append(d.fumanchu(j.resultincorrect,j,a)):j.result&&f.append(d.fumanchu(j.result,j,a)),f.prepend(d.fumanchu(a.templates.incorrect,j,a)),d.trigger("incorrect",[h,b,j,a])):"which"!==
a.type&&"poll"===a.type&&(c.each(j.answers,function(d){j.answers[d].template=a.templates.pollresult}),f.append(d.fumanchu(a.templates.pollresults,j,a))),""!==c.trim(f.html())&&f.removeClass("quizzlestick-hidden"),k.html(d.fumanchu("{{templates.progress}}",a)),d.trigger("answer",[h,b,j,a]),a.api.send({id:a.id,action:"answer",question:m,correct:h,state:a.state},a),a.helpers.numanswers({},a)>=g.length?n.click():a.nextdelay?setTimeout(function(){r.click()},a.nextdelay):a.mustanswer&&1<g.length&&r.add(b.find(".quizzlestick-next")).show().removeClass("quizzlestick-hidden"))}}).on("tap click",
".quizzlestick-next",function(c){c.preventDefault();if(!d.data("complete"))if(a.helpers.numanswers({},a)>=g.length)n.click();else{c=d.find(".quizzlestick-current");var b=c.next(),e=c.data("id");g.removeClass("quizzlestick-question-prev quizzlestick-question-next quizzlestick-current");c.removeClass("quizzlestick-current").addClass("quizzlestick-question-prev");a.state.question<g.length&&(a.state.question=e+1,k.html(d.fumanchu("{{templates.progress}}",a)),b.addClass("quizzlestick-current").next().addClass("quizzlestick-question-next"),
d.trigger("next",[b,g,a]))}}).on("tap click",".quizzlestick-prev",function(c){c.preventDefault();if(!d.data("complete"))if(a.helpers.numanswers({},a)>=g.length)n.click();else{c=d.find(".quizzlestick-current");var b=c.prev(),e=c.data("id");g.removeClass("quizzlestick-question-prev quizzlestick-question-next quizzlestick-current");c.removeClass("quizzlestick-current quizzlestick-question-prev").addClass("quizzlestick-question-next");0<a.state.question&&(confid.state.question=e-1,k.html(d.fumanchu("{{templates.progress}}",
a)),b.addClass("quizzlestick-current").prev().addClass("quizzlestick-question-prev"),d.trigger("prev",[b,g,a]))}}).on("tap click",".quizzlestick-answer",function(b){b.preventDefault();if(!d.data("complete")){b=c(this);var e=c(this).parents(".quizzlestick-question"),f=e.find(".quizzlestick-answer"),h=e.data("id"),m=f.index(b),h=a.questions[h];adata=h.answers[m];if(!e.data("answered")){g.removeClass("quizzlestick-current quizzlestick-question-next quizzlestick-question-prev");e.addClass("quizzlestick-current");
e.next().addClass("quizzlestick-question-next");e.prev().addClass("quizzlestick-question-prev");"multi"===a.type&&(b.toggleClass("quizzlestick-selected"),f.filter(".quizzlestick-selected").length?l.removeClass("quizzlestick-hidden quizzlestick-disabled"):l.addClass("quizzlestick-disabled"));if("single"===a.type||"poll"===a.type||"which"===a.type)b.addClass("quizzlestick-selected"),l.click();"function"===c.type(adata.onselect)&&adata.onselect.apply(this,[adata,e,h]);d.trigger("select",[adata,e,h,a]);
b.trigger("select",[adata,e,h,a])}}}).on("tap click",".quizzlestick-finish",function(b){b.preventDefault();if(!d.data("complete")&&(k.html(d.fumanchu("{{templates.progress}}",a)),a.helpers.numanswers({},a)>=g.length||!a.mustanswer))a.timelimit&&clearInterval(s),d.addClass("quizzlestick-complete").data("complete",!0),d.find(".quizzlestick-next").addClass("quizzlestick-hidden"),d.find(".quizzlestick-prev").addClass("quizzlestick-hidden"),g.removeClass("quizzlestick-current quizzlestick-question-next"),
h.html(d.fumanchu("{{templates.result}}",a)).show().removeClass("quizzlestick-hidden"),c("html,body").animate({scrollTop:h.offset().top-30},"slow"),a.api.send({id:a.id,action:"complete",state:a.state},a),d.trigger("complete",[a])});c.each(a.questions,function(d,b){var e=0;b=c.extend(!0,{id:d},c.fn.quizzlestick.defaults.questiondefaults,b);b.template||(b.template=a.templates.question);c.each(b.answers,function(d,f){f=c.extend(!0,{id:d},c.fn.quizzlestick.defaults.answerdefaults,f);f.template||(f.template=
a.templates.answer);"which"===a.type&&(f.correct=!0);"poll"===a.type&&(f.correct=!1,f.points=0);f.correct&&(b.correct.push(d),a.state.poll=!1);f.correct&&(0>=parseInt(f.points,10)&&"which"!==a.type)&&(f.points=1);"multi"===a.type&&f.correct&&(a.state.maxpoints+=parseInt(f.points,10));if(("single"===a.type||"which"===a.type)&&f.points>e)e=parseInt(f.points,10);b.answers[d]=f});if(("single"===a.type||"which"===a.type)&&e)a.state.maxpoints+=parseInt(e,10);a.questions[d]=b});0<a.state.maxpoints&&(a.state.poll=
!1);a.questions&&(d.html(d.fumanchu(a.templates.scaffold,a)),f=d.find(".quizzlestick-questions"),g=d.find(".quizzlestick-question"),k=d.find(".quizzlestick-progress"),p=d.find(".quizzlestick-timer"),h=d.find(".quizzlestick-result-final"),q=d.find(".quizzlestick-start-screen"),l=d.find(".quizzlestick-check").eq(0),r=d.find(".quizzlestick-next").eq(0),d.find(".quizzlestick-prev").eq(0),n=d.find(".quizzlestick-finish").eq(0),g.each(function(a){c(this).attr("data-id",a).data("id",a)}),h.hide(),2>g.length&&
k.remove(),parseInt(a.timelimit,10)?f.hide().addClass("quizzlestick-hidden"):(p.remove(),q.remove()),"multi"!==a.type&&d.find(".quizzlestick-check").hide(),"which"===a.type&&(a.nextdelay=a.nextdelay||500),a.mustanswer&&(d.find(".quizzlestick-next").hide(),d.find(".quizzlestick-prev").hide(),d.find(".quizzlestick-finish").hide()),g.eq(a.state.question).addClass("quizzlestick-current"),g.eq(a.state.question+1).addClass("quizzlestick-question-next"));return d})},complete:function(){c(this).find(".quizzlestick-next").eq(-1).click();
return this},next:function(){c(this).find(".quizzlestick-question-current .quizzlestick-next").click();return this},prev:function(){c(this).find(".quizzlestick-question-current .quizzlestick-prev").click();return this}};c.fn.quizzlestick=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return b.quiz.apply(this,arguments);c.error("Method "+e+" does not exist on jQuery.quizzlestick");return this};c.fn.quizzlestick.defaults={classname:"",
type:"single",id:"",title:"",description:"",timelimit:0,nextdelay:0,state:{question:0,time:0,points:0,maxpoints:0,answers:[],poll:!0},mustanswer:!0,player:function(){},playonce:!1,order:"normal",maxquestions:0,questions:[],results:[],onstart:c.noop,oncomplete:c.noop,onselect:c.noop,onanswer:c.noop,oncorrect:c.noop,onincorrect:c.noop,ontimer:c.noop,onnext:c.noop,onprev:c.noop,onsend:c.noop,questiondefaults:{question:"",answers:[],onanswer:null,oncorrect:null,onincorrect:null,result:"",resultcorrect:"",
resultincorrect:"",correct:[],template:!1,total:0,friends:[]},answerdefaults:{answer:"",correct:!1,points:0,onselect:null,result:"",resultcorrect:"",resultincorrect:"",template:!1,total:0,friends:[]},templates:{scaffold:'\t\t\t\t<div class="quizzlestick-description">\t\t\t\t\t{{templates.description}}\t\t\t\t</div>\t\t\t\t<div class="quizzlestick-progress">\t\t\t\t\t{{templates.progress}}\t\t\t\t</div>\t\t\t\t<div class="quizzlestick-timer">\t\t\t\t\t{{templates.timer}}\t\t\t\t</div>\t\t\t\t<div class="quizzlestick-start-screen">\t\t\t\t\t{{templates.timerstart}}\t\t\t\t</div>\t\t\t\t<ol class="quizzlestick-questions">\t\t\t\t\t{{templates.questions}}\t\t\t\t</ol>\t\t\t\t{{templates.toolbar}}\t\t\t\t<div class="quizzlestick-result quizzlestick-result-final quizzlestick-hidden">\t\t\t\t\t{{templates.result}}\t\t\t\t</div>\t\t\t',
description:"\t\t\t\t{{description}}\t\t\t",progress:'\t\t\t\tQuestion <span class="quizzlestick-current-num">{{helpers.currentquestion}}</span> \t\t\t\tof <span class="quizzlestick-total">{{helpers.numquestions}}</span>\t\t\t',timer:'\t\t\t\t<span class="quizzlestick-timer-time">{{helpers.remainingtime}}</span>\t\t\t\t<div class="quizzlestick-timer-progress">\t\t\t\t\t<div class="quizzlestick-timer-progress-bar" style="width:{{helpers.timerwidth}}%;"></div>\t\t\t\t</div>\t\t\t',timerstart:'\t\t\t\t<button class="quizzlestick-start" type="button">Start</button>\t\t\t',
result:'\t\t\t\t<div class="quizzlestick-result-text">\t\t\t\t\t{{helpers.getresult}}\t\t\t\t</div>\t\t\t\t{{templates.share}}\t\t\t',questions:"\t\t\t\t{{questions}}\t\t\t",question:'\t\t\t\t<li class="quizzlestick-question">\t\t\t\t\t{{question}}\t\t\t\t\t<ul class="quizzlestick-answers">\t\t\t\t\t\t{{answers}}\t\t\t\t\t</ul>\t\t\t\t\t<div class="quizzlestick-result quizzlestick-result-question quizzlestick-hidden"></div>\t\t\t\t</li>\t\t\t',answer:'\t\t\t\t<li class="quizzlestick-answer">\t\t\t\t\t<a href="#">{{answer}}</a>\t\t\t\t</li>\t\t\t',
pollresults:'\t\t\t\t<div class="quizzlestick-poll-results">\t\t\t\t\t{{answers}}\t\t\t\t</div>\t\t\t',pollresult:'\t\t\t\t<div class="quizzlestick-poll-result">\t\t\t\t\t{{answer}}\t\t\t\t\t<div class="quizzlestick-poll-result-bar" style="width:{{helpers.answerwidth}}%;"><span>{{total}}</span></div>\t\t\t\t</div>\t\t\t',toolbar:'\t\t\t\t<div class="quizzlestick-toolbar">\t\t\t\t\t<a class="quizzlestick-check quizzlestick-hidden" href="#">Check answer</a>\t\t\t\t\t<a class="quizzlestick-prev quizzlestick-hidden" href="#">Previous</a>\t\t\t\t\t<a class="quizzlestick-next quizzlestick-hidden" href="#">Next</a>\t\t\t\t\t<a class="quizzlestick-finish quizzlestick-hidden" href="#">Results</a>\t\t\t\t</div>',
correct:'\t\t\t\t<div class="quizzlestick-response-correct">Correct!</div>\t\t\t',incorrect:'\t\t\t\t<div class="quizzlestick-response-incorrect">Wrong!</div>\t\t\t',share:""},helpers:{time:function(c,d){var a=Math.floor(d.state.time/1E3),b=Math.floor(a/60),g=Math.floor(b/60),k="",a=a-60*b,b=b-60*g;g&&(k+=(10>g?"0"+g:g)+":");return k=k+((10>b?"0"+b:b)+":")+(10>a?"0"+a:a)},timerwidth:function(c,d){var a=100/d.timelimit*d.state.time;isNaN(a)&&(a=0);return a},remainingtime:function(c,d){var a=Math.floor((d.timelimit-
d.state.time)/1E3),b=Math.floor(a/60),g=Math.floor(b/60),k="",a=a-60*b,b=b-60*g;g&&(k+=(10>g?"0"+g:g)+":");return k=k+((10>b?"0"+b:b)+":")+(10>a?"0"+a:a)},getresult:function(b,d){if(!c(this).data("complete"))return"";if("array"===c.type(d.results)){d.results.sort(function(a,b){return a.points>b.points});for(var a in d.results)if(d.state.points<=parseInt(d.results[a].points,10))return d.results[a]}return"string"===c.type(d.results)?d.results:"You scored <strong>{{state.points}}</string> out of <strong>{{state.maxpoints}}</strong>"},
getresultimage:function(){var b=c(this).find(".quizzlestick-result-final img"),d=c(this).find(".quizzlestick-result img");return b.length?b.eq(-1).attr("src"):d.length?d.eq(-1).attr("src"):""},numquestions:function(b,c){return c.questions.length},currentquestion:function(b,c){return parseInt(c.state.question,10)+1},numanswers:function(b,c){var a=0,f;for(f in c.state.answers)a++;return a},progresswidth:function(b,c){var a=100/c.questions.length*c.state.answers.length;isNaN(a)&&(a=0);return a},totalanswers:function(b){return b.total},
answertotal:function(b){return b.total},answerwidth:function(b,d,a){var f=0;d=0;c.map(a.list,function(a){return f+=parseInt(a.total,10)});d=100/f*parseInt(b.total,10);isNaN(d)&&(d=0);return d},numberformat:function(b){return""+b}},api:{send:function(){}}};c(document).ready(function(){c("[data-quizzlestick]").quizzlestick()})})(jQuery);
(function(c){c.fumanchu=function(b,e,d,a){var f=this;c.fumanchu.context=e||{};c.fumanchu.fallback=d||e;c.fumanchu.args=a||{};if("undefined"===c.type(b))return"";"function"===c.type(b)&&(b=b.apply(f,[c.fumanchu.context,c.fumanchu.fallback,c.fumanchu.args]));if("object"===c.type(b))if(b.template)c.fumanchu.context=b,b=b.template;else try{b=b.html()}catch(g){}return b.toString().replace(/(?:__|{{)([a-z0-9\.]+)(?:}}|__)/gi,function(b,d){var e=c.fumanchu.getpath(d,c.fumanchu.context,c.fumanchu.fallback),
g="",l=c.fumanchu.templates[d]||c('[data-template="'+d+'"]').html();!c.fumanchu.templates[d]&&l&&(c.fumanchu.templates[d]=l);"array"===c.type(e)?c.each(e,function(a,b){"object"===c.type(b)&&(!b.template&&l&&(b.template=l),c.fumanchu.context=b);g+=f.fumanchu(b,c.fumanchu.context,c.fumanchu.fallback,{list:e,index:a})}):"object"===c.type(e)&&e.template?g=f.fumanchu(e.template,e,c.fumanchu.fallback,a):"function"===c.type(e)?g=e.apply(f,[c.fumanchu.context,c.fumanchu.fallback,a]):"number"===c.type(e)?
g=c.fumanchu.numberformat(e,c.fumanchu.fallback):"boolean"===c.type(e)?g=e?"1":"0":"string"===c.type(e)&&(g=e);return f.fumanchu(g,c.fumanchu.context,c.fumanchu.fallback,c.fumanchu.args)})};c.fumanchu.getpath=function(b,e,d){b=b.split(".");return 4==b.length&&e&&e[b[0]]&&e[b[0]][b[1]]&&e[b[0]][b[1]][b[2]]&&"undefined"!==c.type(e[b[0]][b[1]][b[2]][b[3]])?e[b[0]][b[1]][b[2]][b[3]]:3==b.length&&e&&e[b[0]]&&e[b[0]][b[1]]&&"undefined"!==c.type(e[b[0]][b[1]][b[2]])?e[b[0]][b[1]][b[2]]:2==b.length&&e&&e[b[0]]&&
"undefined"!==c.type(e[b[0]][b[1]])?e[b[0]][b[1]]:1==b.length&&e&&"undefined"!==c.type(e[b[0]])?e[b[0]]:d&&e!==d?c.fn.fumanchu.getpath(b.join("."),d):""};c.fumanchu.templates={};c.fumanchu.numberformat=function(b){return""+b};c(document).ready(function(){c("[data-template]").each(function(){c.fumanchu.templates[c(this).data("template")]=c(this).html()})});c.fn.fumanchu=c.fumanchu})(jQuery);
//# sourceMappingURL=quizzlestick.min.js.map
